{"id":"Interkasten-1bt","title":"[fd] entity_map UNIQUE constraints lack ON CONFLICT behavior","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-data-integrity (DI-04)\nSeverity: P1\n\nentity_map declares UNIQUE(local_path) and UNIQUE(notion_id) but no ON CONFLICT clause. Default SQLite behavior aborts on conflict. Breaks during: project re-registration, Notion page ID reuse, file moves where local_path changes.\n\nFix: Specify explicit ON CONFLICT behavior (REPLACE, IGNORE, or check-then-insert) for each scenario.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-data-integrity.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:12.449456685-08:00","created_by":"mk","updated_at":"2026-02-14T03:08:27.761963364-08:00","closed_at":"2026-02-14T03:08:27.761963364-08:00","close_reason":"Already addressed during P0 revision (ON CONFLICT behavior documented in entity_map schema invariants)"}
{"id":"Interkasten-23a","title":"[fd] Add uninstall/reset procedure for corrupted state","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-consumer-experience (CE-13)\nSeverity: P2/Medium\n\nNo documented procedure to uninstall or reset Interkasten. Corrupted state.db has no recovery path. Users stuck with broken sync and no way to start fresh.\n\nFix: Add /interkasten:reset command with graduated options (soft reset = clear sync state, hard reset = delete state.db + Notion databases). Document manual cleanup steps.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-consumer-experience.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:09.684478053-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.771246817-08:00","closed_at":"2026-02-14T09:06:20.771246817-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-2mr","title":"[fd] Verify cloudflared binary signature on download","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-safety (SEC-5)\nSeverity: P2/Medium\n\nCloudflared binary auto-downloaded without signature verification. Supply chain risk.\n\nFix: Verify GPG signature or checksum of cloudflared binary after download.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-safety.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:48.975227052-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.774552838-08:00","closed_at":"2026-02-14T09:06:20.774552838-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-2wt","title":"[fd] Asymmetric change detection causes phantom conflicts on roundtrip loss","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-data-integrity (DI-05)\nSeverity: P1\n\nLocal uses content hash, Notion uses timestamp for change detection. Markdown-to-Notion conversion is lossy (~95% fidelity). After push, local content re-hashed differs from what Notion stores, triggering a phantom 'change' on next poll. Creates infinite sync ping-pong.\n\nFix: Hash normalized content (after roundtrip conversion) or hash the Notion-rendered version for comparison. Break the lossy-roundtrip feedback loop.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-data-integrity.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:21.998835002-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.26328344-08:00","closed_at":"2026-02-14T03:12:19.26328344-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-32r","title":"[fd] Revenue projections lack user acquisition evidence","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-user-product (FD-UP-001)\nSeverity: P0/Critical\n\nProjects 10K free users and 15K MRR by month 24 with zero evidence: no conversion funnel, no acquisition channels with estimated reach, no comparable benchmarks, no churn model. 'Conservative' label is unearned.\n\nFix: Either validate with evidence (comparable tool metrics, user interviews, market sizing) or remove projections entirely. Add conversion funnel modeling.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:04.39597523-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.753733272-08:00","closed_at":"2026-02-14T03:06:51.753733272-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-40f","title":"[fd] Notion workspace init creates databases with no documented rollback","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-safety (DEP-1)\nSeverity: P1/High\n\n/interkasten:init creates Notion databases (Projects, Research Inbox, Pagent Workflows, Sync Log) with no rollback procedure. If init fails mid-way or user wants to undo, they must manually delete databases in Notion.\n\nFix: Implement dry-run mode. Document rollback procedure. Consider atomic init with cleanup on failure.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-safety.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:26.237344539-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.25024175-08:00","closed_at":"2026-02-14T03:12:19.25024175-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-4pc","title":"[fd] Plugin hooks in wrong directory (.claude-plugin/ instead of root)","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-plugin-structure (PS-01, PS-02)\nSeverity: P1\n\nHooks placed inside .claude-plugin/hooks/ instead of plugin root hooks/. Also plugin.json declares hooks field which combined with auto-discovery causes duplicate hooks error. Claude Code won't discover hooks, preventing all lifecycle hooks from firing.\n\nFix: Move hooks/ to plugin root. Remove hooks field from plugin.json (auto-discovery handles it).\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-plugin-structure.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:58.727752631-08:00","created_by":"mk","updated_at":"2026-02-14T03:08:20.368679257-08:00","closed_at":"2026-02-14T03:08:20.368679257-08:00","close_reason":"Already addressed during P0 revision (SessionEnd→Stop rename, hooks dir moved to root)"}
{"id":"Interkasten-4zv","title":"[fd] User persona undefined - conflicting complexity vs accessibility signals","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-user-product (FD-UP-002), fd-consumer-experience (CE-01, CE-05)\nSeverity: P0/Critical\nConvergence: 2/8 agents\n\nPRD says 'designed for anyone' but requires: YAML workflow fluency, daemon management, three-way merge debugging, Notion developer portal setup, and 80-line config understanding. Monetization targets indie hackers but requires power-user skills.\n\nFix: Define 1-2 concrete user personas. Align complexity to target persona. If targeting power users, adjust monetization messaging. If targeting general users, add zero-config defaults path.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:56.405234824-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.752060756-08:00","closed_at":"2026-02-14T03:06:51.752060756-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-510","title":"[fd] Undocumented Notion integration prerequisite blocks installation","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-consumer-experience (CE-01)\nSeverity: P0/Critical\n\nInstallation flow omits that user must first: create a Notion integration in the developer portal, configure capabilities, share pages/databases with integration, and obtain token. This is a 5-10 minute manual browser workflow with its own failure modes. Every new user will hit this blocker.\n\nFix: Document Notion integration setup as prerequisite step. Consider adding guided setup in /interkasten:init wizard. Link to Notion developer portal with step-by-step instructions.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:12.233725114-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.755366093-08:00","closed_at":"2026-02-14T03:06:51.755366093-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-55p","title":"[fd] Milestones config uses heterogeneous value types without discriminator","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-api-surface (API-03)\nSeverity: P2/High\n\nmilestones config section mixes bare strings ('project_detected', 'first_beads_issue') and objects ({commits: 5}, {commits: 10, beads_closed: 5, either: true}). No type discriminator. Zod validation will produce terrible error messages.\n\nFix: Use consistent typed format with explicit discriminator. E.g., {type: 'event', event: 'project_detected'} vs {type: 'threshold', commits: 5}.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-api-surface.md","status":"closed","priority":2,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:43.197611169-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.77624959-08:00","closed_at":"2026-02-14T09:06:20.77624959-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-5bz","title":"Add tier-awareness to key-docs module","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T15:46:43.378258807-08:00","created_by":"mk","updated_at":"2026-02-14T15:51:21.433642786-08:00","closed_at":"2026-02-14T15:51:21.433642786-08:00","close_reason":"Integrated triage into init, added Doc Tier select to Notion, tier-aware key docs in list/get project","dependencies":[{"issue_id":"Interkasten-5bz","depends_on_id":"Interkasten-jxc","type":"blocks","created_at":"2026-02-14T15:46:48.712986639-08:00","created_by":"mk"}]}
{"id":"Interkasten-74x","title":"[fd] Sync engine needs crash-recovery protocol (WAL/journaling)","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-data-integrity (DI-02), fd-pipeline-operations (PO-01), fd-architecture (A1), fd-safety (OPS-3)\nSeverity: P0\nConvergence: 4/8 agents\n\nA crash between writing to Notion and updating entity_map leaves permanently diverged state. No WAL, journaling, or idempotency tokens exist. The sync-write-then-update-base-content sequence has no transactional guarantee.\n\nFix: Add write-ahead log or transaction fencing. entity_map update must be atomic with target write. Consider sync fence/epoch mechanism.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:03.364439481-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.739058149-08:00","closed_at":"2026-02-14T03:06:51.739058149-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-7q3","title":"[fd] Notion token exposed in plugin manifest env vars to all hooks","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-safety (SEC-1)\nSeverity: P0/Critical\n\nNotion API token is stored in plugin manifest env vars, visible to all hooks and subprocesses. Token may also leak into base_content column in SQLite state store in cleartext.\n\nFix: Move token to OS keychain or encrypted config. Restrict env var scope. Audit base_content for credential leakage. Add token rotation documentation.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:40.465496908-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.748719461-08:00","closed_at":"2026-02-14T03:06:51.748719461-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-848","title":"[fd] Reduce tool count - merge CRUD variants into parameterized tools","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-api-surface (API-06, API-09)\nSeverity: P2\n\n33 tools inflated by separate CRUD operations that could be parameter variants. pause_workflow/resume_workflow should be single state-change tool. get_health is subset of get_project.\n\nFix: Consolidate to ~28 tools. Merge pause/resume into set_workflow_state. Merge health into project detail. Use parameter variants for CRUD.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-api-surface.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:29.650453213-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.779505747-08:00","closed_at":"2026-02-14T09:06:20.779505747-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-8f6","title":"[fd] Add daemon health-check endpoint / liveness probe","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-pipeline-operations (PO-12)\nSeverity: P2\n\nNo health-check endpoint or liveness probe for the MCP server daemon. No way to verify daemon is alive and connected to Notion from outside.\n\nFix: Add HTTP or IPC health-check endpoint. Report daemon status, Notion connectivity, queue depth, last sync time.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-pipeline-operations.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:22.881061227-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.781162644-08:00","closed_at":"2026-02-14T09:06:20.781162644-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-bqs","title":"[fd] SessionEnd hook event does not exist - use Stop event","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-plugin-structure (PS-03)\nSeverity: P1\n\nPRD conflates Stop and SessionEnd as a single hook. SessionEnd does not exist as a hook event in Claude Code. The sync flush behavior needs to use the Stop event. Repository structure lists session-end.sh with no stop.sh.\n\nFix: Rename to stop.sh and use the Stop hook event for sync flushing.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-plugin-structure.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:05.255046813-08:00","created_by":"mk","updated_at":"2026-02-14T03:08:20.36454173-08:00","closed_at":"2026-02-14T03:08:20.36454173-08:00","close_reason":"Already addressed during P0 revision (SessionEnd→Stop rename, hooks dir moved to root)"}
{"id":"Interkasten-c05","title":"[fd] No API versioning strategy for 33-tool MCP surface","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-api-surface (API-04)\nSeverity: P1/High\n\n33 tools with no versioning or capability introspection. Tool additions are minor bumps, removals are major bumps, but no mechanism exists to communicate version to consumers or negotiate capabilities.\n\nFix: Add interkasten_version/interkasten_capabilities introspection tools. Define versioning policy for tool additions/removals/changes.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-api-surface.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:35.137865823-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.260128988-08:00","closed_at":"2026-02-14T03:12:19.260128988-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-c13","title":"[fd] Address better-sqlite3 native compilation on non-standard platforms","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-consumer-experience (CE-14)\nSeverity: P2/Medium\n\nbetter-sqlite3 requires native compilation (node-gyp, python, make). Fails on systems without build tools. No fallback or pre-built binary strategy for non-standard platforms.\n\nFix: Consider bundling pre-built binaries via prebuildify. Document build tool requirements. Evaluate sql.js as fallback for systems without native compilation.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-consumer-experience.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:16.642412537-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.767727906-08:00","closed_at":"2026-02-14T09:06:20.767727906-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-d68","title":"Integrate triage into init flow and add Doc Tier to Notion","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T15:46:43.304622354-08:00","created_by":"mk","updated_at":"2026-02-14T15:51:21.420043637-08:00","closed_at":"2026-02-14T15:51:21.420043637-08:00","close_reason":"Integrated triage into init, added Doc Tier select to Notion, tier-aware key docs in list/get project","dependencies":[{"issue_id":"Interkasten-d68","depends_on_id":"Interkasten-v9d","type":"blocks","created_at":"2026-02-14T15:46:48.662671467-08:00","created_by":"mk"}]}
{"id":"Interkasten-dnq","title":"[fd] base_content inline in entity_map risks unbounded table growth","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-data-integrity (DI-01), fd-pipeline-operations (PO-06)\nSeverity: P0\nConvergence: 2/8 agents\n\nFull document text stored inline in entity_map table alongside lightweight mapping columns. For 50 projects x 10 docs x 50KB = 25MB of content that must be skipped on every mapping lookup. Creates backup/migration risk and performance degradation.\n\nFix: Move base_content to a separate content-addressed store or dedicated table. Keep entity_map lean for fast lookups.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:47.61671946-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.750366118-08:00","closed_at":"2026-02-14T03:06:51.750366118-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-dob","title":"[fd] Daemon restart/recovery protocol undefined","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-architecture (A7), fd-pipeline-operations (PO-03), fd-safety (DEP-3)\nSeverity: P0\nConvergence: 3/8 agents\n\nNo restart protocol, no state reconciliation on recovery, no health-check endpoint. Daemon is tied to Claude Code stdio pipe with no crash recovery. Mid-sync failures leave undefined state.\n\nFix: Define daemon lifecycle (startup state reconciliation, graceful shutdown, crash recovery). Add health-check endpoint. Decouple daemon from stdio pipe lifecycle.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:18.697280664-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.74364721-08:00","closed_at":"2026-02-14T03:06:51.74364721-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-e7s","title":"[fd] Add interkasten_version and interkasten_capabilities introspection tools","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-api-surface (API-14)\nSeverity: P2\n\nNo introspection mechanism. Consumers cannot discover which tools are available, what version is running, or negotiate capabilities. Essential for forward compatibility.\n\nFix: Add interkasten_version (returns version, API level) and interkasten_capabilities (returns available tools/features).\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-api-surface.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:35.574024246-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.777877313-08:00","closed_at":"2026-02-14T09:06:20.777877313-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-ej8","title":"[fd] Sanitize Notion page content before flowing into AI prompts","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-safety (SEC-7)\nSeverity: P1/Medium\n\nNotion page content flows directly into AI subagent prompts without sanitization. A Notion page could contain prompt injection payloads that alter agent behavior during classify, summarize, or doc-generation workflows.\n\nFix: Sanitize or escape Notion content before prompt injection. Consider content sandboxing or structured extraction.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-safety.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:39.903992955-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.246975737-08:00","closed_at":"2026-02-14T03:12:19.246975737-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-eqq","title":"[fd] Sync engine and pagent engine share no write coordination for Notion","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-pipeline-operations (PO-09)\nSeverity: P1\n\nSync engine and pagent engine can both write to the same Notion page concurrently. No coordination mechanism (locks, semaphore, queue merging). Concurrent writes can conflict and produce inconsistent state.\n\nFix: Add entity-level write lock or serialization queue. Coordinate Notion API writes through a single gateway.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-pipeline-operations.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:55.933446471-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.24188472-08:00","closed_at":"2026-02-14T03:12:19.24188472-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-f62","title":"Add triage test suite","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T15:46:43.179324129-08:00","created_by":"mk","updated_at":"2026-02-14T15:49:07.081639804-08:00","closed_at":"2026-02-14T15:49:07.081639804-08:00","close_reason":"21 new tests covering gatherSignals, classifyProject, getRequiredDocs, triageProject. All 62 tests pass.","dependencies":[{"issue_id":"Interkasten-f62","depends_on_id":"Interkasten-jxc","type":"blocks","created_at":"2026-02-14T15:46:48.556464554-08:00","created_by":"mk"}]}
{"id":"Interkasten-hfs","title":"[fd] Add webhook receiver authentication","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-safety (SEC-6)\nSeverity: P2/Medium\n\nNo authentication mechanism documented for the Notion webhook receiver endpoint. Anyone who discovers the tunnel URL can send fake webhook events.\n\nFix: Validate webhook signatures using Notion's signing secret. Reject unsigned or invalid requests.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-safety.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:56.808961482-08:00","created_by":"mk","updated_at":"2026-02-14T09:06:20.772864089-08:00","closed_at":"2026-02-14T09:06:20.772864089-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-i3h","title":"[fd] Pagent script actions execute arbitrary shell with page data - needs sandbox","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-safety (SEC-3)\nSeverity: P1/High\n\nUser-defined script-type pagent actions execute arbitrary shell commands with Notion page data as JSON on stdin. No sandboxing, no allowlist, no resource limits. Malicious or compromised page content could execute arbitrary commands.\n\nFix: Sandbox script actions in containers or restricted shells. Add command allowlist. Limit execution time and resource usage.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-safety.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:41.49151924-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.25841303-08:00","closed_at":"2026-02-14T03:12:19.25841303-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-ilx","title":"Create onboard skill, phases, and command","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T15:46:43.445560338-08:00","created_by":"mk","updated_at":"2026-02-14T15:52:42.400755144-08:00","closed_at":"2026-02-14T15:52:42.400755144-08:00","close_reason":"Created skills/onboard/SKILL.md, phases/generate.md, phases/watch.md, commands/onboard.md, registered in plugin.json","dependencies":[{"issue_id":"Interkasten-ilx","depends_on_id":"Interkasten-v9d","type":"blocks","created_at":"2026-02-14T15:46:48.776920346-08:00","created_by":"mk"},{"issue_id":"Interkasten-ilx","depends_on_id":"Interkasten-5bz","type":"blocks","created_at":"2026-02-14T15:46:48.829361057-08:00","created_by":"mk"}]}
{"id":"Interkasten-j0l","title":"[fd] Duplicate interkasten_create_workflow tool in two domain groups","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-api-surface (API-01)\nSeverity: P1/High\n\ninterkasten_create_workflow is defined in both Pagent Actions and Pagent Workflows domain groups. Will cause registration conflict at runtime. Also breaks Tool Search discoverability.\n\nFix: Remove from Pagent Actions group. Keep only in Pagent Workflows.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-api-surface.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:27.466913546-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.261703039-08:00","closed_at":"2026-02-14T03:12:19.261703039-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-jxc","title":"Implement triage logic (gatherSignals, classifyProject, getRequiredDocs)","status":"closed","priority":1,"issue_type":"feature","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T15:46:43.105208643-08:00","created_by":"mk","updated_at":"2026-02-14T15:48:09.851068733-08:00","closed_at":"2026-02-14T15:48:09.851068733-08:00","close_reason":"Created server/src/sync/triage.ts with gatherSignals, classifyProject, getRequiredDocs, triageProject exports","dependencies":[{"issue_id":"Interkasten-jxc","depends_on_id":"Interkasten-md0","type":"blocks","created_at":"2026-02-14T15:46:48.506457363-08:00","created_by":"mk"}]}
{"id":"Interkasten-k48","title":"[fd] Validate Notion token before creating workspace structure","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-safety (OPS-1)\nSeverity: P2/Medium\n\nNo pre-deploy check that the Notion token is valid before init creates databases. Invalid token discovered mid-init leaves partial workspace.\n\nFix: Validate token (e.g., get current user) as first step of init. Fail fast with clear error message.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-safety.md","status":"closed","priority":2,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:02.80215705-08:00","created_by":"mk","updated_at":"2026-02-14T09:04:15.560687005-08:00","closed_at":"2026-02-14T09:04:15.560687005-08:00","close_reason":"Already addressed during P0/P1 revision: init wizard validates token as step 1, init manifest prevents partial workspace creation"}
{"id":"Interkasten-m8v","title":"[fd] Notion API errors shown as raw HTTP codes - no user-friendly translation","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-consumer-experience (CE-10)\nSeverity: P1/Medium\n\nNotion API errors (401 unauthorized, 403 forbidden, 429 rate limited) are not translated into user-friendly messages with remediation steps. Sync conflict resolution exposes raw merge diff output.\n\nFix: Define error translation layer: 401 -\u003e 'Token expired or invalid. Run export INTERKASTEN_NOTION_TOKEN=...', 429 -\u003e 'Rate limited. Will retry automatically in N seconds', etc.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-consumer-experience.md","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:33.083362533-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.248617335-08:00","closed_at":"2026-02-14T03:12:19.248617335-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-md0","title":"Add doc_tier column to entity_map schema","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T15:46:43.031624959-08:00","created_by":"mk","updated_at":"2026-02-14T15:47:29.06568019-08:00","closed_at":"2026-02-14T15:47:29.06568019-08:00","close_reason":"Added doc_tier column to schema.ts, conditional migration in db.ts, and updateDocTier helper in entities.ts"}
{"id":"Interkasten-nlx","title":"[fd] Sync log stored in Notion database - failures prevent logging failures","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-data-integrity (DI-12), fd-pipeline-operations (PO-11), fd-consumer-experience (CE-16)\nSeverity: P1/P2\nConvergence: 3/8 agents\n\nSync log is a Notion database. When Notion API fails, the sync log write also fails, losing the audit trail of the failure. Users cannot debug sync issues when Notion is the problem.\n\nFix: Store sync log primarily in local SQLite. Mirror to Notion as a secondary. Ensure local log survives API outages.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:05.277667474-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.254959994-08:00","closed_at":"2026-02-14T03:12:19.254959994-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-nu0","title":"[fd] No /interkasten:doctor or /interkasten:help command for self-diagnosis","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-consumer-experience (CE-09), fd-user-product (FD-UP-005)\nSeverity: P1/High\nConvergence: 2/8 agents\n\nNo self-diagnosis command exists. Users have no way to check: is the daemon running? Is the token valid? Are hooks registered? What projects are tracked? 33 tools + pagent DSL with no discoverable help system.\n\nFix: Add /interkasten:doctor (checks daemon, token, hooks, projects) and /interkasten:help (lists commands grouped by workflow).\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:12.479370971-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.253391083-08:00","closed_at":"2026-02-14T03:12:19.253391083-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-pdr","title":"[fd] Config file not auto-generated during init","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-consumer-experience (CE-02, CE-05)\nSeverity: P1/Critical\n\n~/.interkasten/config.yaml is referenced but never auto-generated. User must manually create 80-line YAML config before init works. No interkasten init --defaults path exists.\n\nFix: Auto-generate config.yaml with sensible defaults during /interkasten:init. Add --defaults flag for zero-config setup. Detect projects_dir automatically.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-consumer-experience.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:48.996500615-08:00","created_by":"mk","updated_at":"2026-02-14T03:08:28.2192559-08:00","closed_at":"2026-02-14T03:08:28.2192559-08:00","close_reason":"Already addressed during P0 revision (init wizard now auto-generates config.yaml, --defaults path added)"}
{"id":"Interkasten-pem","title":"[fd] Fan-out cardinality unbounded - classify returning N matches spawns N instances","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-data-integrity (DI-14), fd-pipeline-operations (PO-07)\nSeverity: P1\nConvergence: 2/8 agents\n\nPagent classify action returning 100 matched projects spawns 100 parallel downstream instances. No max_fan_out limit. Can exhaust API rate limits and memory.\n\nFix: Add max_fan_out config per workflow node (default: 10). Excess matches queued or paginated.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:45:57.196513862-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.25660616-08:00","closed_at":"2026-02-14T03:12:19.25660616-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-tm0","title":"[fd] Hook shell injection: unsanitized tool output in shell commands","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-safety (SEC-2), fd-plugin-structure\nSeverity: P0\nConvergence: 2/8 agents\n\nPostToolUse hooks parse untrusted JSON from tool output and pass values to shell commands without sanitization. FILE_PATH from tool arguments flows directly into 'interkasten notify-change FILEPATH'. A crafted filename like 'foo; rm -rf /' would execute arbitrary commands.\n\nFix: Shell-escape all variables from tool output before use in commands. Use -- to terminate option parsing. Validate file paths against expected patterns.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:25.57431209-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.745391892-08:00","closed_at":"2026-02-14T03:06:51.745391892-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-uiq","title":"[fd] Notion API backpressure and circuit-breaker missing","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-architecture (A3), fd-pipeline-operations (PO-02, PO-04), fd-data-integrity (DI-09), fd-safety (OPS-2)\nSeverity: P0\nConvergence: 4/8 agents\n\np-queue caps concurrency at 3 req/sec but does not handle Notion 429 responses. Operation queue grows without bound during API outages, leading to memory exhaustion. No exponential backoff or circuit-breaker.\n\nFix: Implement backpressure with exponential backoff for 429s. Add circuit-breaker for sustained failures. Cap operation queue size with shedding.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:11.935565624-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.741971517-08:00","closed_at":"2026-02-14T03:06:51.741971517-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-v9d","title":"Implement interkasten_triage MCP tool","status":"closed","priority":1,"issue_type":"task","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T15:46:43.236916371-08:00","created_by":"mk","updated_at":"2026-02-14T15:49:53.597130173-08:00","closed_at":"2026-02-14T15:49:53.597130173-08:00","close_reason":"Created server/src/daemon/tools/triage.ts with interkasten_triage MCP tool (dry-run + apply modes). Registered in index.ts.","dependencies":[{"issue_id":"Interkasten-v9d","depends_on_id":"Interkasten-jxc","type":"blocks","created_at":"2026-02-14T15:46:48.603089021-08:00","created_by":"mk"}]}
{"id":"Interkasten-w5f","title":"[fd] Notion last_edited_time unreliable as sole change detection signal","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-data-integrity (DI-03), fd-architecture (A4)\nSeverity: P0\nConvergence: 2/8 agents\n\nNotion last_edited_time has second-granularity, is non-monotonic under concurrent API writes, and coalesces rapid edits. Used as the sole Notion-side change detection mechanism. Rapid edits within the same second are invisible, causing missed changes.\n\nFix: Supplement timestamp with content-hash verification on the Notion side. Hash Notion block content after fetch and compare to stored hash.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":0,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:44:32.847283692-08:00","created_by":"mk","updated_at":"2026-02-14T03:06:51.747014413-08:00","closed_at":"2026-02-14T03:06:51.747014413-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-ws4","title":"[fd] Operation queue deduplication missing - rapid FS events enqueue redundant ops","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgents: fd-data-integrity (DI-09), fd-pipeline-operations (PO-08)\nSeverity: P1\nConvergence: 2/8 agents\n\nFS watcher + PostToolUse hooks + poll cycle can all detect the same change, enqueuing duplicate operations for the same entity. No deduplication in the operation queue.\n\nFix: Deduplicate by entity key + direction. Coalesce operations within debounce window. Use entity-level write locks.\n\nReview output: docs/research/flux-drive/PRD-MVP/","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:48.255576631-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.245418429-08:00","closed_at":"2026-02-14T03:12:19.245418429-08:00","close_reason":"Addressed in PRD revision"}
{"id":"Interkasten-xd3","title":"[fd] Cascade/orphan handling undefined for project unregistration and file deletion","description":"From flux-drive review of PRD-MVP (2026-02-14).\n\nAgent: fd-data-integrity (DI-07)\nSeverity: P1\n\nNo specification for what happens to Notion pages when a local project is unregistered or files are deleted. entity_map entries become orphaned. Notion pages may continue to exist with no local counterpart, or local files may reference deleted Notion pages.\n\nFix: Define cascade policy (archive, delete, mark-stale). Add orphan detection sweep. Handle both directions.\n\nReview output: docs/research/flux-drive/PRD-MVP/fd-data-integrity.md","status":"closed","priority":1,"issue_type":"bug","owner":"mistakeknot@users.noreply.github.com","created_at":"2026-02-14T02:46:19.376584998-08:00","created_by":"mk","updated_at":"2026-02-14T03:12:19.251786735-08:00","closed_at":"2026-02-14T03:12:19.251786735-08:00","close_reason":"Addressed in PRD revision"}
